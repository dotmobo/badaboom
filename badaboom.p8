pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
--badaboom
--mobo
c_debug=false -- to debug size screen 96x96 format
c_min_screen=0+16 --like 0 but in 96x96 format
c_max_screen=128-16 -- like 128 in 96x96 format

function _init()
	state=2
end

function _update60()
	if (state==0) update_game()
	if (state==1) update_gameover()
	if (state==2) update_gamestart()
end

function _draw()
	if (state==0) draw_game()
	if (state==1) draw_gameover()
	if (state==2) draw_gamestart()
	--96x96 screen with black borders
	for i=0,15 do
		rect(i, i, 127-i, 127-i, 0)
	end
	-- to text 96x96 size
	if c_debug then
		pset(0+16, 0+16, 8)
		pset(0+16, 127-16, 8)
		pset(127-16, 0+16, 8)
		pset(127-16, 127-16, 8)
	end
end
-->8
-- game start
function update_gamestart()
	if (btn(ðŸ…¾ï¸)) init_game()
end

function draw_gamestart()
	draw_building_background()
	map(0,0,0,0,16,16)
	spr(c_p_sprite,c_p_x,c_p_y)
	rectfill(31,73,105,109,13)
	rectfill(28,70,102,106,2)
	print("Badaboom!",34,76,6)
	print("c or ðŸ…¾ï¸ to start",34,96,6)
end
-->8
-- game over
function update_gameover()
	if (btn(ðŸ…¾ï¸)) init_game()
	if music_start then
		music_start=false
		music(-1)
	end
end

function draw_gameover()
	draw_building_background()
	map(0,0,0,0,16,16)
	spr(c_p_sprite,c_p_x,c_p_y)
	rectfill(31,73,105,109,13)
	rectfill(28,70,102,106,2)
	print("game over",34,76,6)
	print("c or ðŸ…¾ï¸ to retry",34,96,6)
end
-->8
--game
function init_game()
	state=0
	speed=1
	boost=0
	music_start=false
	init_birds()
	init_building()
	init_winds()
end

function update_game()
	if not music_start then
		music(0)
		music_start=true
	end
	update_building()
	update_winds()
	update_birds()
end

function draw_game()
	draw_building_background()
	draw_birds()
	draw_building()
	draw_winds()
end
-->8
-- building
function init_building()
	map_y=0
end

function update_building()
	map_y-=speed+boost
	if map_y<-127 then map_y=0 end
end

function draw_building()
	map(0,0,0,map_y,16,16)
	map(0,0,0,128+map_y,16,16)
end

function draw_building_background()
	cls(12)
	-- sun
	circfill(27, 27, 8, 10)
	-- clouds left
	line(18, 40, 30, 40, 7)
	line(20, 45, 35, 45, 7)
	line(17, 50, 23, 50, 7)
	line(28, 55, 35, 55, 7)
	-- clouds rigth
	line(90, 25, 103, 25, 7)
	line(95, 35, 100, 35, 7)
	line(89, 40, 95, 40, 7)
	line(90, 50, 105, 50, 7)
	line(92, 55, 95, 55, 7)
	line(90, 60, 110, 60, 7)
end
-->8
-- bird
function init_birds()
	birds={}
end

function update_birds()
	-- spawn birds
	if #birds==0 then
		for i=0,rnd(8) do
			local b={x=c_max_screen+rnd(64),y=64+rnd(80),s=rnd({25,41}),a=0}
				add(birds,b)
		end
	end
	-- move birds
	for b in all(birds) do
		b.x-=speed/2
		b.y-=speed/2+boost
		--del bird outside screen
		if b.x<c_min_screen-4 or b.y<c_min_screen-4 then
			del(birds,b)
		end
		-- animations
		b.a+=1
		if b.a%12==0 then
			b.s+=1
		end
		if b.s==29 then
			b.s=25
			b.a=0
		end
		if b.s==45 then
			b.s=41
			b.a=0
		end
	end
end

function draw_birds()
	for b in all(birds) do
		spr(b.s,b.x,b.y,0.5,0.5)
	end
end
-->8
-- winds
function init_winds()
	winds={}
	for i=1,14 do
		local new_wind={
			x=c_min_screen+rnd(c_max_screen-c_min_screen-1),
			y=c_min_screen+rnd(c_max_screen-c_min_screen-1),
			col=7,
			speed=rnd(4)
		}
		add(winds,new_wind)
	end
end

function update_winds()
	for s in all(winds) do
		s.y-=s.speed+speed*2+boost
		if s.y < c_min_screen then
			s.y=c_max_screen
			s.x=c_min_screen+rnd(c_max_screen-c_min_screen-1)
		end
	end
end

function draw_winds()
	for s in all(winds) do
		pset(s.x,s.y,s.col)
	end
end
__gfx__
0000000055555555555665555556655555555555000088711000000000000000000000000000e00000e000000000e00000e000000000e00000e0000000000000
000000005995599555566555555665555995599500111111111100000000000000000000000e0000000e0000000e0000000e0000000e0000000e000000000000
00700700599559955556655555566555599559950111cc1cc1ccc0000000000000000000e7e7088807e7088807e7088827e7088807e7088807e7088800000000
0007700059955995555665555556655559955995811111111111111a00000000000000000777e888e777e8882777e8880777e8882777e888e777e88800000000
0007700055555555555665555556655555555555111111111111111100000000000000000777ee382777ee38e777ee380777ee38e777ee382777ee3800000000
00700700599559955556655555566555599559956666666666666666000000000000000027e708e807e708e807e70ee8e7e70ee807e70ee807e708e800000000
000000005995599555566555555665555995599555555555555555550000000000000000000e0e38000e0e38000e0e38000e0e38000e0e38000e0e3800000000
0000000055555555555665555556655555555555000000000000000000000000000000000000e00000e000000000e00000e000000000e00000e0000000000000
00000000555555555556655555566555555555550000000000000000000000000000000097000000970000009700000097050000000000000000000000000000
00000000599559955556655555566555599559952222222222222000000000000000000007570000075700000755000007570000000000000000000000000000
00000000599559955556655555566555599559952221121121121100000000000000000007570000077500000777000007770000000000000000000000000000
00000000555555555556655555566555555555558221121121122228000000000000000000900000009000000090000000900000000000000000000000000000
00000000599559955556655555566555599559952222222222222222000000000000000000000000000000000000000000000000000000000000000000000000
00000000599559955556655555566555599559956666666666666666000000000000000000000000000000000000000000000000000000000000000000000000
00000000599559955556655555566555599559955555555555555555000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555556655555566555555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555556655555566555555555550000000000000000000000000000000093000000930000009300000093050000000000000000000000000000
000000005995599555566555555665555995599500aaaaaaaaaa0000000000000000000003560000035600000355000003560000000000000000000000000000
00000000555555555556655555566555555555550aaa55a55a555000000000000000000006560000066500000666000006660000000000000000000000000000
00000000666666666666666666666666666666668aaaaaaaaaaaaaa9000000000000000000900000009000000090000000900000000000000000000000000000
0000000066666666666666666666666666666666aaaaaaaaaaaaaaaa000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555556655555566555555555556666666666666666000000000000000000000000000000000000000000000000000000000000000000000000
00000000599559955556655555566555599559955555555555555555000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555556655555566555555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555556655555566555555555550000000000000000000000000000000000000000000000000000000000000000708888077070070700000000
00000000599559955556655555566555599559953333333333333300000000000000000000000000000000000000000000000000787007877070070708808800
0000000059955995555665555556655559955995333b3b3b3bbbbbb0000000000000000000000000000000000000000000000000807008087070070788888780
0000000059955995555665555556655559955995833b3b3b33333339000000000000000000000000000000000000000000000000807087087070070788888880
00000000555555555556655555566555555555553333333333333333000000000000000000000000000000000000000000000000807807087070070788888880
00000000599559955556655555566555599559956666666666666666000000000000000000000000000000000000000000000000808007087070070708888800
00000000599559955556655555566555599559955555555555555555000000000000000000000000000000000000000000000000787007877070070700888000
00000000555555555556655555566555555555550000000000000000000000000000000000000000000000000000000000000000708888077070070700080000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200
__map__
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010102030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010103030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010103030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010103030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020010103030401202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0001000011650106500f6500e6500c6500a65005650006500d6000860006600326000060035600006003760000600386003860038600386003660000600006000060000600006000060000600006000060000600
000300001b1501a15019150181501715016150141501315012150111500f1500d1500a15007150031500015015100001000e10011100001000f10008100001000010000100001000010000100001000010000100
000300000315005150071500a1500d1501015013150171501b15022150261502d150351503e1503f1500010000100001000010000100001000010000100001000010000100001000010000100001000010000100
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011400000403000000000000000009030000000000000000040300000004030000000903000000000000000004030000000000000000090300000000000000000403000000040300000009030000000000000000
0114000024030000002d030000002d030000002d030000002f030000002b03000000000000000000000000003003000000320300000030030000002f030000002b030000002d0300000000000000000000000000
__music__
00 05454344
02 05064344
0000
